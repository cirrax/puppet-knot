# @summary server configuration section
# @see https://www.knot-dns.cz/docs/latest/html/reference.html#server-section
type Knot::Server = Struct[{
  'comment'                 => Optional[String[1]],
  'identity'                => Optional[String[1]],
  'version'                 => Optional[String[1]],
  'nsid'                    => Optional[Variant[String[1],Knot::Subtypes::Hexstr]],
  'rundir'                  => Optional[String[1]],
  'user'                    => Optional[String[1]],
  'pidfile'                 => Optional[String[1]],
  'udp-workers'             => Optional[Integer],
  'tcp-workers'             => Optional[Integer],
  'background-workers'      => Optional[Integer],
  'async-start'             => Optional[Boolean],
  'tcp-idle-timeout'        => Optional[String[1]],
  'tcp-io-timeout'          => Optional[Integer],
  'tcp-remote-io-timeout'   => Optional[Integer],
  'tcp-max-clients'         => Optional[Integer],
  'tcp-reuseport'           => Optional[Boolean],
  'tcp-fastopen'            => Optional[Boolean],
  'quic-max-clients'        => Optional[Integer],
  'quic-outbuf-max-size'    => Optional[Knot::Subtypes::Size],
  'quic-idle-close-timeout' => Optional[Knot::Subtypes::Time],
  'remote-pool-limit'       => Optional[Integer],
  'remote-pool-timeout'     => Optional[Knot::Subtypes::Time],
  'remote-retry-delay'      => Optional[Integer],
  'socket-affinity'         => Optional[Boolean],
  'udp-max-payload'         => Optional[Knot::Subtypes::Size],
  'udp-max-payload-ipv4'    => Optional[Knot::Subtypes::Size],
  'udp-max-payload-ipv6'    => Optional[Knot::Subtypes::Size],
  'key-file'                => Optional[String[1]],
  'cert-file'               => Optional[String[1]],
  'ca-file'                 => Optional[Array[String[1]]],
  'edns-client-subnet'      => Optional[Boolean],
  'answer-rotation'         => Optional[Boolean],
  'automatic-acl'           => Optional[Boolean],
  'proxy-allowlist'         => Optional[Array[String[1]]],
  'dbus-event'              => Optional[Array[Enum['none', 'running', 'zone-updated', 'external-verify', 'ksk-submission', 'dnssec-invalid']]],
  'dbus-init-delay'         => Optional[Knot::Subtypes::Time],
  'listen'                  => Optional[Array[String[1]]],
  'listen-quic'             => Optional[Array[String[1]]],
  'listen-tls'              => Optional[Array[String[1]]],
}]
